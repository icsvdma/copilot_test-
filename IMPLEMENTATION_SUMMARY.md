# 山形県ライブカメラ・気象情報アプリ - 実装概要

## アプリ構成図

```
山形県ライブカメラアプリ
│
├── ホーム画面 (HomeScreen)
│   ├── アプリタイトル・説明
│   ├── 地域選択ウィジェット (RegionSelector)
│   │   ├── 村山地域
│   │   ├── 最上地域
│   │   ├── 置賜地域
│   │   └── 庄内地域
│   └── 詳細表示ボタン
│
├── 地域詳細画面 (RegionDetailScreen)
│   ├── 地域情報ヘッダー
│   ├── 気象情報カード (WeatherInfoCard)
│   │   ├── 天気状況・アイコン
│   │   ├── 気温表示
│   │   ├── 積雪深表示
│   │   └── 最終更新時刻
│   └── ライブカメラ一覧
│       └── カメラカード (CameraCard) × N
│           ├── カメラ画像
│           ├── カメラ名
│           ├── 位置情報
│           └── 説明文
│
└── カメラ詳細画面 (CameraDetailScreen)
    ├── カメラ画像（大）
    ├── カメラ情報
    │   ├── 名称
    │   ├── 場所
    │   ├── 座標（緯度・経度）
    │   └── 詳細説明
    └── 更新ボタン
```

## データフロー

```
[ユーザー操作]
    ↓
[Screen Layer] ← UI表示・ユーザー操作
    ↓
[Service Layer] ← データ取得・ビジネスロジック
    ↓
[Model Layer] ← データ構造定義
    ↓
[Mock Data / Future API]
```

## 各地域のデータ

### 村山地域（murayama）
- カメラ: 山形市街地、蔵王温泉スキー場
- 気温: -2.5℃、積雪: 45cm

### 最上地域（mogami）
- カメラ: 新庄市街地、肘折温泉
- 気温: -5.0℃、積雪: 120cm（豪雪地帯）

### 置賜地域（okitama）
- カメラ: 米沢市街地、白布温泉スキー場
- 気温: -3.0℃、積雪: 60cm

### 庄内地域（shonai）
- カメラ: 酒田市街地、鶴岡市街地
- 気温: 2.0℃、積雪: 15cm（日本海沿岸）

## 技術的な特徴

### アーキテクチャ
- **レイヤー分離**: Models, Services, Screens, Widgetsに明確に分離
- **再利用性**: 共通ウィジェットを作成し、複数箇所で利用
- **拡張性**: サービス層を介することで、将来のAPI統合が容易

### UI/UX
- **Material Design 3**: 最新のデザインシステムを採用
- **日本語対応**: すべてのUI要素が日本語
- **直感的操作**: タップ、スワイプ、Pull-to-Refreshなど自然な操作
- **視覚的フィードバック**: ローディング、エラー表示、選択状態など

### データ管理
- **モックデータ**: 開発段階で使用
- **非同期処理**: Future/asyncを使用した適切な非同期データ取得
- **エラーハンドリング**: try-catchによる例外処理

## テスト

### ユニットテスト
- **models_test.dart**: データモデルのテスト
  - 地域データの取得と検証
  - カメラデータのフィルタリング
  - 気象データの取得とフォーマット

- **services_test.dart**: サービス層のテスト
  - カメラサービスの各メソッド
  - 気象サービスの各メソッド
  - 非同期処理の検証

### ウィジェットテスト
- **widget_test.dart**: UIコンポーネントのテスト
  - アプリの起動
  - ホーム画面の表示
  - 地域選択の表示

## ファイル統計

- Dartファイル: 11ファイル
- 総行数: 約1,334行
- テストファイル: 3ファイル
- テストコード: 約152行

## セキュリティ

- コード分析: CodeQL実行済み（問題なし）
- エラーハンドリング: 適切な例外処理を実装
- null安全性: Dart 3.0のnull-safetyを活用

## 今後の拡張可能性

1. **実際のAPIとの統合**
   - サービス層のみ変更すればOK
   - モデルや画面は変更不要

2. **追加機能**
   - お気に入りカメラの登録
   - 通知機能（大雪警報など）
   - 時系列データの表示（グラフ）
   - 地図表示機能

3. **パフォーマンス最適化**
   - 画像キャッシング
   - データキャッシング
   - 差分更新

4. **多言語対応**
   - 英語、中国語などの追加
   - l10nパッケージの導入
